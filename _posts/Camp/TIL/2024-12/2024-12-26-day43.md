---
title: "(TIL) 2024-12-26"
tags:
  - 캠프
  - TIL
date: "2024-12-26"
thumbnail: "/assets/img/thumbnail/TIL.webp"
bookmark: true
---

# **GAME ROOM**

---

과제 진행 중 게임 정보를 배열로 관리하려고 했으나 튜더님의 말씀으로 'ROOM 클래스'를 통해서 관리하는 방법에 대해서 생각해보라 라고 말씀하셔서 ROOM 클래스에 대해서 조사해봤다.
멀티플레이 게임에서 플레이어들이 모여 상호작용할 수 있는 공간(방)을 관리하는 데 사용되는 주요 개념이다. 이를 통해 플레이어 간의 동기화, 통신, 게임 진행 관리 등이 이루어진다.

# ROOM 클래스의 역할

## 플레이어 관리

- 플레이어 입장, 퇴장, 목록 관리.
- 플레이어의 상태 업데이트(예: 점수, 위치, 체력 등).

## 게임 상태 관리

- 룸에 속한 플레이어들 간 게임 상태를 동기화.
- 게임의 시작, 종료, 진행 상황 관리.

## 통신 중계

- 플레이어들 간의 메시지 전달(채팅, 명령, 동작 정보 등).
- 클라이언트가 서버로 데이터를 보내면, 서버는 해당 데이터를 룸 내 다른 클라이언트로 전달.

## 게임 논리 처리

룸 내에서만 적용되는 게임 규칙 및 로직 실행.
예: 턴제 게임에서 턴 관리, 점수 계산.

# 기본적인 구조

## 속성

- ID: 방을 식별할 고유 ID.
- 플레이어 목록: 방에 입장한 플레이어들의 목록(예: 배열, 맵).
- 상태: 방의 상태(대기 중, 게임 중, 종료 등).
- 설정: 룸에 적용되는 커스텀 설정(예: 최대 플레이어 수, 제한 시간).

## 메서드

- 플레이어 입장/퇴장  
  예) addPlayer(player): 플레이어를 방에 추가  
  예) removePlayer(player): 플레이어를 방에서 제거
- 상태 관리
  예) startGame(): 게임 시작  
  예) endGame(): 게임 종료

- 데이터 브로드캐스트  
  예) broadcast(message): 룸 내 모든 플레이어에게 메시지 전송

- 커스텀 로직  
  예) 턴 관리, 이벤트 처리 등

# 설계시 주의점

## 동기화 문제

- 여러 클라이언트가 동시에 방에 접근할 경우 데이터 일관성을 유지해야 함.
- 플레이어가 중복으로 입장하거나 퇴장하지 않도록 처리

## 성능

- 대규모 멀티플레이어 게임의 경우 룸 데이터를 효율적으로 처리해야 함
- 필요 시 룸을 여러 서버에 분산 배치

## 에러 처리

- 플레이어 연결 끊김, 룸의 비정상 종료 등을 처리할 로직 필요

## 확장성

- 룸 내부 로직(예: 채팅, 게임 규칙)을 확장 가능하도록 설계

# 코드 예시

```javascript
class Room {
  constructor(roomId, maxPlayers) {
    this.roomId = roomId;
    this.maxPlayers = maxPlayers;
    this.players = [];
    this.state = "waiting";
    this.currentTurnIndex = 0;
  }

  addPlayer(player) {}
  removePlayer(player) {}
  startGame() {}
  endGame() {}
  broadcast(message) {}

  //기타 필요한 로직
}
```
